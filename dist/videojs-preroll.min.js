/*! videojs-preroll - v2.0.0 - 2019-01-16
* Copyright (c) 2019 Sano Webdevelopment;
* Copyright (c) 2014 The Onion
* Licensed MIT */

!function(a,r){"use strict";var e,l={src:"",href:"",target:"_blank",allowSkip:!0,skipTime:5,repeatAd:!1,adSign:!1,showRemaining:!1,adsOptions:{},lang:{skip:"Skip","skip in":"Skip in ",advertisement:"Advertisement","video start in":"Video will start in: "}};e=function(e){var i=r.mergeOptions(l,e),n=this;n.ads(i.adsOptions),n.preroll={adDone:!1},n.on("contentupdate",function(){n.preroll.shouldPlayPreroll()?n.trigger("adsready"):n.trigger("adscanceled")}),n.on("readyforpreroll",function(){if(n.preroll.shouldPlayPreroll()){if(n.ads.startLinearAdMode(),n.src(i.src),n.one("durationchange",function(){n.play()}),n.one("progress",function(){n.play()}),n.one("adloadstart",function(){n.play()}),""!==i.href){var e=document.createElement("a");e.className="preroll-blocker",e.href=i.href,e.target=i.target||"_blank",e.onclick=function(){n.trigger("adclick")},n.preroll.blocker=e,n.el().insertBefore(e,n.controlBar.el())}if(!1!==i.adSign){var r=document.createElement("div");r.className="advertisement-box",n.preroll.adBox=r,n.el().appendChild(r),n.preroll.adBox.innerHTML=i.lang.advertisement}if(!1!==i.showRemaining&&!1===i.allowSkip){var l=document.createElement("div");l.className="remaining-time",n.preroll.remainingTime=l,n.el().appendChild(l),n.preroll.remainingTime.innerHTML=i.lang["video start in"],n.on("adtimeupdate",n.preroll.timeremaining)}if(!1!==i.allowSkip){var o=document.createElement("div");o.className="preroll-skip-button",n.preroll.skipButton=o,n.el().appendChild(o),o.onclick=function(e){var r=r||a.Event;if(0<=(" "+n.preroll.skipButton.className+" ").indexOf(" enabled ")&&n.preroll.exitPreroll(),void 0===r.prototype.stopPropagation)return!1;e.stopPropagation()},n.on("adtimeupdate",n.preroll.timeupdate)}n.one("adended",n.preroll.exitPreroll),n.one("error",n.preroll.prerollError)}else n.trigger("adscanceled")}),n.preroll.shouldPlayPreroll=function(){return""!==i.src&&!0!==n.preroll.adDone},n.preroll.exitPreroll=function(){void 0!==n.preroll.skipButton&&n.preroll.skipButton.parentNode.removeChild(n.preroll.skipButton),void 0!==n.preroll.adBox&&n.preroll.adBox.parentNode.removeChild(n.preroll.adBox),void 0!==n.preroll.remainingTime&&n.preroll.remainingTime.parentNode.removeChild(n.preroll.remainingTime),void 0!==n.preroll.blocker&&n.preroll.blocker.parentNode.removeChild(n.preroll.blocker),n.off("adended",n.preroll.exitPreroll),n.off("error",n.preroll.prerollError),!0!==i.repeatAd&&(n.preroll.adDone=!0),n.loadingSpinner.show(),n.posterImage.hide(),n.bigPlayButton.hide(),n.ads.endLinearAdMode()},n.preroll.timeupdate=function(e){n.loadingSpinner.hide();var r=Math.ceil(i.skipTime-n.currentTime());0<r?n.preroll.skipButton.innerHTML=i.lang["skip in"]+r+"...":-1===(" "+n.preroll.skipButton.className+" ").indexOf(" enabled ")&&(n.preroll.skipButton.className+=" enabled",n.preroll.skipButton.innerHTML=i.lang.skip)},n.preroll.timeremaining=function(e){n.loadingSpinner.hide();var r=Math.ceil(n.remainingTime());0<r&&(n.preroll.remainingTime.innerHTML=i.lang["video start in"]+r)},n.preroll.prerollError=function(e){n.preroll.exitPreroll()},n.currentSrc()&&(n.preroll.shouldPlayPreroll()?n.trigger("adsready"):n.trigger("adscanceled"))},r.registerPlugin("preroll",e)}(window,window.videojs);