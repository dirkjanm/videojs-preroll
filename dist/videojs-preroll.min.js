/*! videojs-preroll - v1.1.0 - 2016-10-22
* Copyright (c) 2016 Sano Webdevelopment;
* Copyright (c) 2014 The Onion
* Licensed MIT */
!function(a,b){"use strict";var c,d={src:"",href:"",target:"_blank",allowSkip:!0,skipTime:5,repeatAd:!1,adSign:!1,showRemaining:!1,adsOptions:{},lang:{skip:"Skip","skip in":"Skip in ",advertisement:"Advertisement","video start in":"Video will start in: "}};c=function(c){var e=b.mergeOptions(d,c),f=this;f.ads(e.adsOptions),f.preroll={adDone:!1},f.on("contentupdate",function(){f.preroll.shouldPlayPreroll()?f.trigger("adsready"):f.trigger("adscanceled")}),f.on("readyforpreroll",function(){if(!f.preroll.shouldPlayPreroll())return void f.trigger("adscanceled");if(f.ads.startLinearAdMode(),f.src(e.src),f.one("durationchange",function(){f.play()}),f.one("progress",function(){f.play()}),f.one("adloadstart",function(){f.play()}),""!==e.href){var b=document.createElement("a");b.className="preroll-blocker",b.href=e.href,b.target=e.target||"_blank",b.onclick=function(){f.trigger("adclick")},f.preroll.blocker=b,f.el().insertBefore(b,f.controlBar.el())}if(e.adSign!==!1){var c=document.createElement("div");c.className="advertisement-box",f.preroll.adBox=c,f.el().appendChild(c),f.preroll.adBox.innerHTML=e.lang.advertisement}if(e.showRemaining!==!1&&e.allowSkip===!1){var d=document.createElement("div");d.className="remaining-time",f.preroll.remainingTime=d,f.el().appendChild(d),f.preroll.remainingTime.innerHTML=e.lang["video start in"],f.on("adtimeupdate",f.preroll.timeremaining)}if(e.allowSkip!==!1){var g=document.createElement("div");g.className="preroll-skip-button",f.preroll.skipButton=g,f.el().appendChild(g),g.onclick=function(b){var c=c||a.Event;return(" "+f.preroll.skipButton.className+" ").indexOf(" enabled ")>=0&&f.preroll.exitPreroll(),void 0===c.prototype.stopPropagation?!1:void b.stopPropagation()},f.on("adtimeupdate",f.preroll.timeupdate)}f.one("adended",f.preroll.exitPreroll),f.one("error",f.preroll.prerollError)}),f.preroll.shouldPlayPreroll=function(){return""===e.src?!1:f.preroll.adDone===!0?!1:!0},f.preroll.exitPreroll=function(){"undefined"!=typeof f.preroll.skipButton&&f.preroll.skipButton.parentNode.removeChild(f.preroll.skipButton),"undefined"!=typeof f.preroll.adBox&&f.preroll.adBox.parentNode.removeChild(f.preroll.adBox),"undefined"!=typeof f.preroll.remainingTime&&f.preroll.remainingTime.parentNode.removeChild(f.preroll.remainingTime),"undefined"!=typeof f.preroll.blocker&&f.preroll.blocker.parentNode.removeChild(f.preroll.blocker),f.off("adended",f.preroll.exitPreroll),f.off("error",f.preroll.prerollError),e.repeatAd!==!0&&(f.preroll.adDone=!0),f.loadingSpinner.show(),f.posterImage.hide(),f.bigPlayButton.hide(),f.ads.endLinearAdMode()},f.preroll.timeupdate=function(a){f.loadingSpinner.hide();var b=Math.ceil(e.skipTime-f.currentTime());b>0?f.preroll.skipButton.innerHTML=e.lang["skip in"]+b+"...":-1===(" "+f.preroll.skipButton.className+" ").indexOf(" enabled ")&&(f.preroll.skipButton.className+=" enabled",f.preroll.skipButton.innerHTML=e.lang.skip)},f.preroll.timeremaining=function(a){f.loadingSpinner.hide();var b=Math.ceil(f.remainingTime());b>0&&(f.preroll.remainingTime.innerHTML=e.lang["video start in"]+b)},f.preroll.prerollError=function(a){f.preroll.exitPreroll()},f.currentSrc()&&(f.preroll.shouldPlayPreroll()?f.trigger("adsready"):f.trigger("adscanceled"))},b.plugin("preroll",c)}(window,window.videojs);